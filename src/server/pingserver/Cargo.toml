[package]
name = "pelikan-pingserver"
build = "build.rs"

version = { workspace = true }
edition = { workspace = true }
homepage = { workspace = true }
repository = { workspace = true }
license = { workspace = true }

[dependencies]
backtrace = { workspace = true }
bytes = "*"
clap = { workspace = true }
common = { path = "../../common" }
config = { path = "../../config" }
entrystore = { path = "../../entrystore" }
humantime = "2.1.0"
h2 = "0.4.3"
http = "1.1.0"
http-body-util = "0.1.2"
hyper = { version = "1.4.0", features = ["http1", "http2", "server"] }
logger = { path = "../../logger" }
metriken = { workspace = true }
pin-project = "1.1.5"
prost = "0.13"
protocol-ping = { path = "../../protocol/ping", features = ["server"] }
serde = { workspace = true, features = ["derive"] }
server = { path = "../../core/server" }
session = { path = "../../session" }
tokio = { version = "1.0", features = ["macros", "rt-multi-thread"] }
toml = { workspace = true }
tonic = { version = "0.12" }
warp = "0.3.6"
chrono = "0.4.38"
quinn = "0.11.2"
rustls = { version = "0.23.11", default-features = false, features = [
    "logging",
    "ring",
    "std",
] }
rustls-native-certs = "0.7.1"
h3 = "0.0.6"
h3-quinn = "0.0.7"


# mimalloc = "0.1.43"

[target.'cfg(not(target_env = "msvc"))'.dependencies]
jemallocator = "0.3.2"

[build-dependencies]
tonic-build = "0.12"

